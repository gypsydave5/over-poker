package model.texasholdem.probability.checkers

import overpoker.playingcards.{Card, PlayerHand, Deck}
import overpoker.texasholdem.hands._

object ProbabilityVariationsFlop {

  def main(args: Array[String]) {
    val allPlayerHands: List[PlayerHand] = Deck.fullDeck.cards.combinations(2).toList.map(cards => PlayerHand(cards.head, cards(1)))

    // Before the flop, what's the probability of X after the flop
    def probabilities(playerHand: PlayerHand): Map[String, Double] = {
      val deck: Vector[Card] = Deck.fullDeck.cards.filter(card => card != playerHand.card1 && card != playerHand.card2)
      val allFlopCombinations: Vector[Vector[Card]] = deck.combinations(3).toVector

      val hands: Vector[Hand] = allFlopCombinations.map(flop => Hand.getValues(playerHand, flop).head)
      val numFlopVariations: Double = allFlopCombinations.length.toDouble
      Map(
          "High Card" -> hands.count(hand => hand.isInstanceOf[HighCard]).toDouble / numFlopVariations,
          "Pair" -> hands.count(hand => hand.isInstanceOf[Pair]).toDouble / numFlopVariations,
          "Two Pair" -> hands.count(hand => hand.isInstanceOf[TwoPair]).toDouble / numFlopVariations,
          "Three of a Kind" -> hands.count(hand => hand.isInstanceOf[ThreeOfAKind]).toDouble / numFlopVariations,
          "Straight" -> hands.count(hand => hand.isInstanceOf[Straight]).toDouble / numFlopVariations,
          "Flush" -> hands.count(hand => hand.isInstanceOf[Flush]).toDouble / numFlopVariations,
          "Full House" -> hands.count(hand => hand.isInstanceOf[FullHouse]).toDouble / numFlopVariations,
          "Four of a Kind" -> hands.count(hand => hand.isInstanceOf[FourOfAKind]).toDouble / numFlopVariations,
          "Straight Flush" -> hands.count(hand => hand.isInstanceOf[StraightFlush]).toDouble / numFlopVariations,
          "Royal Flush" -> hands.count(hand => hand == RoyalFlush).toDouble / numFlopVariations
        )
    }

    val probs: List[Map[String, Double]] = allPlayerHands.par.map(probabilities).toList

    List("High Card", "Pair", "Two Pair", "Three of a Kind", "Straight", "Flush", "Full House", "Four of a Kind", "Straight Flush", "Royal Flush")
//      .par.foreach{ hand =>
//        println(hand + " " + probs.par.map(_(hand)).distinct.length)
//      }
      .foreach{ hand =>
      println(hand + " " + probs.par.map(_(hand)).distinct)
    }
  }
}

// Hand            Num different Probabilities
// Royal Flush          2
// Straight Flush       5
// Four of a Kind       2
// Full House           2
// Flush                6
// Straight             9
// Three of a Kind      2
// Two Pair             2
// Pair                 2
// High Card            11



// Royal Flush      ParVector(0.0, 5.102040816326531E-5)
// Straight Flush   ParVector(1.0204081632653062E-4, 5.102040816326531E-5, 0.0, 1.530612244897959E-4, 2.0408163265306123E-4)
// Four of a Kind   ParVector(1.0204081632653062E-4, 0.0024489795918367346)
// Full House       ParVector(9.183673469387755E-4, 0.009795918367346938)
// Flush            ParVector(0.008316326530612246, 0.00836734693877551, 0.008418367346938776, 0.0, 0.00826530612244898, 0.008214285714285714)
// Straight         ParVector(0.0064285714285714285, 0.0032142857142857142, 0.0, 0.006530612244897959, 0.0032653061224489797, 0.009642857142857142, 0.009795918367346938, 0.012857142857142857, 0.013061224489795919)
// Three of a Kind  ParVector(0.015714285714285715, 0.10775510204081633)
// Two Pair         ParVector(0.04040816326530612, 0.16163265306122448)
// Pair             ParVector(0.40408163265306124, 0.7183673469387755)
// High Card        ParVector(0.5239285714285714, 0.5271428571428571, 0.5303571428571429, 0.0, 0.5322448979591837, 0.5355102040816326, 0.5387755102040817, 0.5207142857142857, 0.5289795918367347, 0.5175, 0.5257142857142857)



object ProbabilityVariationsTurn {

}

//High Card       ParVector(0.332370820668693, 0.3313156752062527, 0.3302605297438124, 0.3365914025184542, 0.34186712983065565, 0.34081198436821536, 0.3387016934433348, 0.3439774207555363, 0.34292227529309594, 0.0, 0.3474164133738602, 0.3463135041250543, 0.3452105948762484, 0.3518280503690838, 0.35734259661311335, 0.35623968736430744, 0.35403386886669563, 0.35954841511072516, 0.35844550586191926, 0.32498480243161093, 0.32392965696917064, 0.3355362570560139, 0.33975683890577507, 0.3376465479808945, 0.33969604863221886, 0.33859313938341296, 0.3507251411202779, 0.35513677811550154, 0.35293095961788973, 0.31759878419452886, 0.32920538428137214, 0.3344811115935736, 0.3319756838905775, 0.3441076856274425, 0.349622231871472, 0.32287451150673036, 0.32815023881893185, 0.3334259661311333, 0.33749023013460705, 0.3430047763786366, 0.3485193226226661)
//Pair            ParVector(0.4712592270950934, 0.47084237950499347, 0.471650021710812, 0.47329135909683023, 0.47206686930091185, 0.555154146765089, 0.4805254016500217, 0.48011289622231873, 0.48094659140251844, 0.4826052974381242, 0.48135909683022143, 0.47045158488927485, 0.470034737299175, 0.47969170646982195, 0.47927920104211896, 0.46922709509335647, 0.47844550586191925, 0.5540512375162832)
//Two Pair        ParVector(0.11176726009552758, 0.275119409465914)
//Three of a Kind ParVector(0.03060790273556231, 0.12269214068606166)
//Straight        ParVector(0.017859313938341295, 0.01891445940078159, 0.020386452453321754, 0.013247937472861486, 0.006330872774641771, 0.007386018237082067, 0.010720798957881025, 0.004220581849761181, 0.0052757273122014765, 0.0011029092488059054, 0.018623534520191054, 0.01972644376899696, 0.02124185844550586, 0.01379070777247069, 0.006617455492835432, 0.007720364741641337, 0.011172383847155883, 0.004411636995223621, 0.005514546244029527, 0.026052974381241857, 0.027524967433782025, 0.01430308293530178, 0.008441163699522362, 0.01177594442032132, 0.027177594442032132, 0.028693009118541033, 0.014893617021276596, 0.008823273990447243, 0.012275293095961788, 0.034663482414242296, 0.02144159791576205, 0.015358228397742075, 0.009496309161962658, 0.012831089882761616, 0.0361441597915762, 0.022344767694311766, 0.015996526270082502, 0.009926183239253148, 0.013378202344767694, 0.02858011289622232, 0.022496743378202344, 0.01641337386018237, 0.0022058184976118107, 0.02979591836734694, 0.02344767694311767, 0.017099435518888408)
//Flush           ParVector(0.028475900998697352, 0.028419452887537992, 0.028363004776378636, 0.028727746417716023, 0.02903603994789405, 0.028979591836734694, 0.028840642640034737, 0.029148936170212764, 0.029092488059053408, 0.00429005644811116, 0.004164133738601823, 0.004155449413808077, 0.004142422926617455, 0.004194528875379939, 0.004246634824142423, 0.004237950499348676, 0.004216239687364307, 0.004264003473729918, 0.00425531914893617, 0.028054711246200608, 0.02799826313504125, 0.028671298306556667, 0.028923143725575338, 0.02878419452887538, 0.004103343465045593, 0.0040903169778549716, 0.004185844550586192, 0.004229266174554928, 0.00420755536257056, 0.027633521493703864, 0.02830655666521928, 0.028614850195397307, 0.028866695614415978, 0.004038211029092488, 0.004133738601823709, 0.004177160225792445, 0.004220581849761181, 0.004198871037776813, 0.027941815023881895, 0.028250108554059922, 0.02855840208423795, 0.004281372123317412, 0.004081632653061225, 0.004125054277029961, 0.004168475900998697)
//Full House      ParVector(0.006304819800260529, 0.036682587928788535)
//Four of a Kind  ParVector(4.559270516717325E-4, 0.004950065132435953)
//Straight Flush  ParVector(8.988276161528441E-4, 9.552757273122015E-4, 0.0010117238384715589, 6.469821971341729E-4, 3.3868866695614414E-4, 3.9513677811550154E-4, 4.7763786365610073E-4, 1.6934433347807207E-4, 2.2579244463742944E-4, 2.822405557967868E-4, 8.684324793747287E-6, 1.3460703430308294E-4, 1.4329135909683021E-4, 1.5631784628745114E-4, 1.0421189752496743E-4, 5.2105948762483714E-5, 6.0790273556231004E-5, 7.381676074685193E-5, 2.6052974381241857E-5, 3.473729917498915E-5, 4.342162396873643E-5, 0.0013200173686495876, 0.0013764654798089449, 7.034303082935301E-4, 4.515848892748589E-4, 5.340859748154581E-4, 1.9539730785931393E-4, 2.0842379504993486E-4, 1.1289622231871472E-4, 6.94745983499783E-5, 8.250108554059922E-5, 0.0017412071211463309, 0.0010681719496309161, 7.598784194528875E-4, 5.905340859748155E-4, 2.6052974381241857E-4, 1.6500217108119845E-4, 1.2158054711246201E-4, 9.11854103343465E-5, 0.0014329135909683021, 0.0011246200607902736, 8.163265306122449E-4, 1.7368649587494574E-5, 2.1710811984368216E-4, 1.7368649587494572E-4, 1.3026487190620929E-4)
//Royal Flush     ParVector(0.0, 5.644811115935736E-5, 8.684324793747287E-6, 4.211897524967434E-4, 6.94745983499783E-5, 6.513243595310464E-5, 6.0790273556231004E-5)
